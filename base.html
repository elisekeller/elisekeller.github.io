<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">

  {%- include head.html -%}

  <body>

    {%- include header.html -%}

    <div class="site-wrapper">
      <aside class="toc">
        <nav id="toc"></nav>
      </aside>

      <main class="page-content" aria-label="Content">
        <div class="wrapper">
          {{ content }}
        </div>
      </main>
    </div>

    {%- include footer.html -%}
    {%- include sub-footer.html -%}

    <!-- TOC Script -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const toc = document.getElementById("toc");
        const headings = document.querySelectorAll(".page-content h2, .page-content h3");
        let html = "<ul>";
        headings.forEach(h => {
          const id = h.textContent.trim().toLowerCase().replace(/\s+/g, "-");
          h.id = id;
          html += `<li style="margin-left:${h.tagName === 'H3' ? '1rem' : '0'}">
                    <a href="#${id}">${h.textContent}</a>
                  </li>`;
        });
        html += "</ul>";
        toc.innerHTML = html;
      });
    </script>
  </body>

</html>
